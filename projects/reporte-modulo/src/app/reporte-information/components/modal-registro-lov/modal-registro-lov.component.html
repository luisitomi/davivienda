<app-close></app-close>
<app-loader *ngIf="spinner"></app-loader>
<h1 mat-dialog-title>Registro LOV</h1>
 <form [formGroup]="form" autocomplete="off"> 
       <div mat-dialog-content class="evol-editar-linea-container">
        <app-input   (input)="onFocusOutEvent('NombreLov')" (focusout)="onFocusOutEvent('NombreLov')" [label]="'Nombre Lov'" formControlName="NombreLov" [error]="showErrors('NombreLov')"></app-input>
        <app-form-errors [control]="form.controls['NombreLov']"></app-form-errors>

        <app-select [label]="'Tipo'" (input)="onFocusOutEvent('TipoLov')" 
        (focusout)="onFocusOutEvent('TipoLov')"  formControlName="TipoLov" [options]="listTipoLov" [error]="showErrors('TipoLov')">
        <app-form-errors [control]="form.controls['TipoLov']"></app-form-errors>
        </app-select>

        <app-input *ngIf="form.value.TipoLov == 1"   (input)="onFocusOutEvent('CampoValor')" (focusout)="onFocusOutEvent('CampoValor')" [label]="'Columna Valor'" formControlName="CampoValor" [error]="showErrors('CampoValor')"></app-input>
        <app-form-errors [control]="form.controls['CampoValor']"></app-form-errors>

        <app-input *ngIf="form.value.TipoLov == 1"   (input)="onFocusOutEvent('CampoKey')" (focusout)="onFocusOutEvent('CampoKey')" [label]="'Columna Codigo'" formControlName="CampoKey" [error]="showErrors('CampoKey')"></app-input>
        <app-form-errors [control]="form.controls['CampoKey']"></app-form-errors>
        
        <app-input *ngIf="form.value.TipoLov == 1"   (input)="onFocusOutEvent('TablaConsulta')" (focusout)="onFocusOutEvent('TablaConsulta')" [label]="'Tabla de Consulta'" formControlName="TablaConsulta" [error]="showErrors('TablaConsulta')"></app-input>
        <app-form-errors [control]="form.controls['TablaConsulta']"></app-form-errors>

        <app-input   *ngIf="form.value.TipoLov == 1"  (input)="onFocusOutEvent('QueryWhere')" (focusout)="onFocusOutEvent('QueryWhere')" [label]="'Consulta Where'" formControlName="QueryWhere" [error]="showErrors('QueryWhere')"></app-input>
        <app-form-errors [control]="form.controls['QueryWhere']"></app-form-errors>
        {{form.value.TipoLov}}
  
       
       <textarea matInput placeholder="Ingrese consulta SQL"
       *ngIf="form.value.TipoLov == 2"
            cdkTextareaAutosize
            cdkAutosizeMinRows="1"
            formControlName="Query" 
            cols="100"
            rows="10"
            cdkAutosizeMaxRows="50" >
        </textarea> 

      
        <!--
        <app-input [onlyNumber]="true" (input)="onFocusOutEvent('dni')" (focusout)="onFocusOutEvent('dni')" [label]="'DNI'" formControlName="dni" [error]="showErrors('dni')"></app-input>
        <app-form-errors [control]="form.controls['dni']"></app-form-errors>
        <app-input (input)="onFocusOutEvent('cc')" (focusout)="onFocusOutEvent('cc')" [label]="'CC'" formControlName="cc" [error]="showErrors('cc')"></app-input>
        <app-form-errors [control]="form.controls['cc']"></app-form-errors> -->
    </div>  
  <mat-dialog-actions class="evol-footer-actions">
        <app-actions [color]="'accent'" [class]="'flat'" (click)="save()" [disabled]="!form.valid" [loading]="loading" [label]="'Guardar'"></app-actions>
    </mat-dialog-actions> 
</form>